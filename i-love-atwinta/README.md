# Веб-приложение "ОнлайнЗдрав"

> Приложение предназначено для записи на приём в поликлиники

## Полезные ссылки 
- [`Переписывание стилей в material-ui`](https://mui.com/customization/how-to-customize/#2-reusable-style-overrides)
- [`Маски для дат Luxon`](https://github.com/moment/luxon/blob/master/docs/formatting.md#table-of-tokens)


## Глоссарий 
- `Ticket` - время записи, с инфорацмией о стоймости и т.д.

## Неочевидные моменты:
- Для добавления своих кастомных классов для `<Typography/>` - нужно раcширить модуль materialStyles.d.ts
- Используется глобальные autorun для упрощения повторяющейся логики
  - `~/services/autoruns.ts`
- Для серилизации форм использовать строготипизированную функцию `serializeFormData` для декларативного представления процесса серилизации

## Обработка ошибок EGIS
- Существует отдельный store - **EgisErrorStore**, его интерфейс предназначен для обработки ошибок системы EGIS
- В рамках существующей реализации, для обработки ошибок стоит оборачивать сервисы, использующие EGIS, `checkCallbackForEgisError`
- Ошибки обрабатываются глобально в **App.ts**.

## Коды ошибок со стороны сервера и клиента
Перечь ошибок есть в файле src/store/types/request/index.ts в виде enum ResponseStatusCode
- Коды ошибок: 
1. нет ошибок
2. не все параметры переданы
3. данные не найдены
4. ошибка SQL или PL
5. токен авторизации протух
6. токен авторизации протух, необходима перезагрузка
7. токена не существует
8. некорректные параметры
9. сессия авторизации прошла
10. сессия авторизации была заблокирована (происходит из-за наплыва запросов)
Код -21 ошибка ЕГИС

## Разработка
### Сборка проекта
```bash
# Установка зависимостой
$ yarn # или npm i

# Старт проекта в development
$ yarn serve # или npm run serve

# Сборка проекта в production
$ yarn build # или npm run build
```

### Webpack
- Проект используется webpack конфиг, не зависящий от react-cli, что позволяет гибче настраивать конфигурацию проекта

### Git Workflow
1. Работа происходит в `develop`, в случае необходимости можно создать `feature-ветку`
2. Ведём разработку и тестирование локально
3. После проверки работу - сливаем изменения в `main` ветку

### Типизация
- Проект старается быть максимально строготипизированным, где это возможно, кроме редких случаев вроде `TextFieldMask` - где не ясно какой тип будет у Ref значения
